<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>In Love</title>
  <style>
    :root{ 
      --pink:#FF9AA2; /* pastel h·ªìng ch·ªß ƒë·∫°o */
      --bg:#fff; 
      --text:#333; 
      --chip:#ffe6ea; /* n·ªÅn chip cute */
      --chip-border:#ffd2d9;
    }
    html,body{ height:100%; margin:0; overflow:hidden; }
    body{
      display:grid; place-items:center;
      font-family: "SF Pro Text", "SF Pro Display", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial;
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
      position: relative;
    }
    main{ text-align:center; padding:24px; position:relative; z-index:2; }
    .title{ color: var(--pink); font-weight:700; font-size: clamp(28px, 7.5vw, 56px); letter-spacing:.2px; }
    .counter{ margin-top:12px; color: var(--pink); font-weight:600; font-size: clamp(14px, 4vw, 22px); }

    /* HEARTS */
    .heart{ position:absolute; bottom:-60px; pointer-events:none; left:50vw; animation: sway var(--dur,8s) ease-in-out infinite; will-change: transform; }
    .heart-svg{ width: 48px; height: 48px; filter: drop-shadow(0 6px 10px rgba(0,0,0,.1)); opacity: var(--op,.9); animation: floatUp var(--dur,8s) linear forwards; will-change: transform, opacity; display:block; }
    @keyframes floatUp{ 0%{ transform: translateY(0) rotate(var(--rot,0deg)) scale(1); opacity:var(--op,.9);} 70%{ opacity:1; } 100%{ transform: translateY(-130vh) rotate(var(--rot,0deg)) scale(1.08); opacity:0;} }
    @keyframes sway{ 0%{ transform: translateX(0);} 25%{ transform: translateX(var(--amp,40px)); } 50%{ transform: translateX(0);} 75%{ transform: translateX(calc(var(--amp,40px) * -1)); } 100%{ transform: translateX(0);} }

    /* MUSIC TOGGLE (cute chip) */
    .music-toggle{
      position: fixed; top: 12px; right: 12px; z-index: 6;
      display:flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius:999px; border:1px solid var(--chip-border);
      background: var(--chip); color:#cc4d64; font-weight:700; cursor:pointer; user-select:none;
      box-shadow:0 10px 20px rgba(255,153,170,.25);
    }
    .music-toggle:hover{ filter:brightness(1.03); }

    /* MUSIC PLAYER (cute) */
    .player{ position: fixed; top: 60px; right: 12px; z-index: 5; background:#fff; border:1px solid #f3d2da; box-shadow:0 12px 28px rgba(255,153,170,.25); border-radius:16px; padding:12px 14px; text-align:center; min-width:230px; display:none; }
    .player.show{ display:block; }
    .player .title{ font-size:14px; font-weight:700; color:#cc4d64; margin-bottom:8px; }
    .player .progress{ width:100%; appearance:none; height:6px; border-radius:999px; background:#ffe3ea; outline:none; }
    .player .progress::-webkit-slider-thumb{ appearance:none; width:14px; height:14px; border-radius:50%; background: var(--pink); box-shadow:0 2px 6px rgba(255,153,170,.6); }
    .player .time{ margin-top:6px; font-size:12px; color:#a66677; display:flex; justify-content:space-between; }
    .player .controls{ margin-top:8px; display:flex; justify-content:center; gap:10px; }
    .player button{ appearance:none; border:0; cursor:pointer; font-size:16px; line-height:1; padding:8px; border-radius:12px; background: #ffe6ea; color:#cc4d64; }
    .player button:hover{ background:#ffd9e1; }
  
    /* CLICK BURST ICONS */
    .burst{ position: absolute; z-index: 4; pointer-events:none; will-change: transform, opacity; }
    @keyframes floatUpDown {
      0%   { transform: translate(0, 0) scale(1); opacity: 1; }
      40%  { transform: translate(var(--dx,0), -120px) scale(1.1); opacity: 1; }
      100% { transform: translate(calc(var(--dx,0)*1.2), 160px) rotate(var(--rot,0deg)) scale(0.9); opacity: 0; }
    }
      /* POLAROID / VINTAGE FRAMES */
    .drop-hint{ position:fixed; inset:0; display:flex; align-items:flex-end; justify-content:center; padding:18px; pointer-events:none; z-index:1; }
    .drop-hint .chip{ background:rgba(255,154,162,.12); color:#cc4d64; border:1px dashed #ffced4; border-radius:999px; padding:6px 12px; font-weight:700; font-size:12px; backdrop-filter: blur(2px); }

    .polaroids{ position:fixed; left:0; right:0; bottom:8px; height:34vh; pointer-events:none; z-index:1; }
    .polaroid{ position:absolute; bottom:0; width:160px; background:#fffdf5; border:1px solid #f1e6ce; border-bottom-width:20px; /* ph·∫ßn gi·∫•y tr·∫Øng d√†y b√™n d∆∞·ªõi */
      box-shadow: 0 6px 16px rgba(0,0,0,.12), 0 1px 0 rgba(0,0,0,.05) inset; border-radius:6px; overflow:hidden; transform-origin:50% 100%; }
    .polaroid img{ width:100%; height:auto; display:block; filter: sepia(.12) contrast(1.05) saturate(.9); }

    .polaroid::after{ content:""; position:absolute; inset:0; background: radial-gradient(120% 70% at 50% -10%, rgba(255,255,255,.35), rgba(0,0,0,0) 40%);
      pointer-events:none; }
</style>
</head>
<body>
  <!-- Cute toggle chip -->
  <div class="music-toggle" id="musicToggle" aria-label="B·∫≠t nh·∫°c">
    <span id="toggleIcon">üéµ</span>
    <span id="toggleText">B·∫≠t nh·∫°c</span>
  </div>

  <div class="player" id="player" aria-label="music player">
    <div class="title" id="songTitle">‚Äî</div>
    <input id="progress" class="progress" type="range" min="0" max="100" step="1" value="0" />
    <div class="time"><span id="elapsed">0:00</span><span id="remaining">-0:00</span></div>
    <div class="controls">
      <button id="prev" title="B√†i tr∆∞·ªõc">‚èÆÔ∏è</button>
      <button id="play" title="Ph√°t/T·∫°m d·ª´ng">‚ñ∂Ô∏è</button>
      <button id="next" title="B√†i ti·∫øp">‚è≠Ô∏è</button>
    </div>
    <audio id="audio" preload="auto"></audio>
  </div>

  <main>
    <div class="title" id="titleMain">H·ªØu H∆∞ng ‚ù§Ô∏è Th√∫y B√¨nh</div>
    <div class="counter" id="counter">We were together ‚Äî</div>
    </main>

  <!-- Polaroid container + hint -->
  <div class="polaroids" id="polaroids"></div>
  <div class="drop-hint" id="dropHint"><div class="chip">K√©o & th·∫£ ·∫£nh v√†o ƒë√¢y ƒë·ªÉ t·∫°o khung vintage ‚ú®</div></div>

  <script>
    /* COUNTER */
    const START = new Date('2025-03-20T00:00:00');
    const $counter = document.getElementById('counter');
    function pad(n){ return String(n).padStart(2,'0'); }
    function tick(){
      const now = new Date(); let diff = now - START;
      const sec=1000, min=60*sec, hour=60*min, day=24*hour;
      const days=Math.floor(diff/day); diff%=day;
      const hours=Math.floor(diff/hour); diff%=hour;
      const minutes=Math.floor(diff/min); diff%=min;
      const seconds=Math.floor(diff/sec);
      $counter.textContent=`We were together ${days} day ${pad(hours)} hour ${pad(minutes)} min ${pad(seconds)} second`;
    }
    tick(); setInterval(tick,1000);

    /* HEARTS */
    const COLORS=['#FF9AA2','#FEB7B2','#FFDAC1','#E2F0CB','#B5EAD7','#C7CEEA'];
    function createHeart(){
      const wrap=document.createElement('div'); wrap.className='heart';
      const svgNS='http://www.w3.org/2000/svg';
      const svg=document.createElementNS(svgNS,'svg'); svg.setAttribute('viewBox','0 0 32 29'); svg.classList.add('heart-svg');
      const path=document.createElementNS(svgNS,'path');
      path.setAttribute('d','M16 30 C 8 23, 3 15, 8 9 C 11 6, 16 8, 16 11 C 16 8, 21 6, 24 9 C 29 15, 24 23, 16 30 Z');
      const base=COLORS[Math.floor(Math.random()*COLORS.length)];
      path.setAttribute('fill', base); path.setAttribute('stroke','rgba(255,255,255,.55)'); path.setAttribute('stroke-width','0.6'); path.setAttribute('shape-rendering','geometricPrecision');
      svg.appendChild(path);
      const left=Math.random()*100, rot=(Math.random()*26 - 13).toFixed(1), dur=(Math.random()*4 + 7).toFixed(2)+'s', op=(Math.random()*0.25 + 0.75).toFixed(2), amp=(Math.random()*80 - 40).toFixed(0)+'px';
      wrap.style.left=left+'vw'; wrap.style.setProperty('--dur', dur); wrap.style.setProperty('--amp', amp); svg.style.setProperty('--rot', rot+'deg'); svg.style.setProperty('--op', op);
      wrap.appendChild(svg); document.body.appendChild(wrap); setTimeout(()=>wrap.remove(),13000);
    }
    const seed=36; for(let i=0;i<seed;i++){ setTimeout(createHeart, i*100); } setInterval(createHeart,420);

    /* MUSIC PLAYER */
    const songs = [
      { title: 'I Love You 3000', file: 'iloveyou3000.mp3' },
      { title: 'Mirrors', file: 'Mirrors.mp3' },
      { title: 'Young And Beautiful', file: 'youngandbeautiful.mp3' },
    ];
    let i = 0;
    const audio = document.getElementById('audio');
    const playBtn = document.getElementById('play');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');
    const titleSongEl = document.getElementById('songTitle');
    const progress = document.getElementById('progress');
    const elapsed = document.getElementById('elapsed');
    const remaining = document.getElementById('remaining');

    function fmt(t){ if(!isFinite(t)|| t<0) t=0; const m=Math.floor(t/60); const s=Math.floor(t%60); return `${m}:${String(s).padStart(2,'0')}`; }

    function loadSong(idx){
      const s=songs[idx];
      audio.src=s.file; titleSongEl.textContent=s.title; progress.value=0; elapsed.textContent='0:00'; remaining.textContent='-0:00';
    }

    function play(){ audio.play(); playBtn.textContent='‚è∏Ô∏è'; toggleIcon.textContent='‚è∏Ô∏è'; toggleText.textContent='ƒêang ph√°t'; }
    function pause(){ audio.pause(); playBtn.textContent='‚ñ∂Ô∏è'; toggleIcon.textContent='üéµ'; toggleText.textContent='B·∫≠t nh·∫°c'; }

    playBtn.addEventListener('click', ()=> audio.paused ? play() : pause());
    prevBtn.addEventListener('click', ()=>{ i=(i-1+songs.length)%songs.length; loadSong(i); play(); });
    nextBtn.addEventListener('click', ()=>{ i=(i+1)%songs.length; loadSong(i); play(); });
    audio.addEventListener('ended', ()=> nextBtn.click());

    // c·∫≠p nh·∫≠t thanh th·ªùi gian + b·ªô ƒë·∫øm
    audio.addEventListener('loadedmetadata', ()=>{
      progress.value = 0; elapsed.textContent='0:00'; remaining.textContent = `-${fmt(audio.duration)}`;
    });
    audio.addEventListener('timeupdate', ()=>{
      if (!isNaN(audio.duration)){
        const cur = audio.currentTime; const dur = audio.duration;
        progress.value = (cur/dur*100)||0; elapsed.textContent = fmt(cur); remaining.textContent = `-${fmt(Math.max(dur-cur,0))}`;
      }
    });
    progress.addEventListener('input', ()=>{ if (!isNaN(audio.duration)) audio.currentTime = progress.value/100*audio.duration; });

    // Toggle hi·ªÉn th·ªã player + play l·∫ßn ƒë·∫ßu
    const player = document.getElementById('player');
    const musicToggle = document.getElementById('musicToggle');
    const toggleIcon = document.getElementById('toggleIcon');
    const toggleText = document.getElementById('toggleText');

    musicToggle.addEventListener('click', ()=>{
      if (player.classList.contains('show')){
        pause();
        player.classList.remove('show');
      } else {
        player.classList.add('show');
        if (!audio.src) loadSong(i);
        play();
      }
    });

    /* CLICK BURST ICONS */
    const ICONS = ['ü¶ä','ü¶ä','‚úàÔ∏è','üê∞','üê∞','‚òÅÔ∏è','üåü','üå∏','üéµ','üéß'];
    function spawnIcon(x, y){
      const el = document.createElement('div'); el.className = 'burst'; el.textContent = ICONS[Math.floor(Math.random()*ICONS.length)];
      el.style.left = x + 'px'; el.style.top  = y + 'px'; el.style.fontSize = (Math.random()*14 + 24) + 'px';
      el.style.setProperty('--dx', (Math.random()*200-100).toFixed(0)+'px');
      el.style.setProperty('--rot', (Math.random()*60-30).toFixed(0)+'deg');
      el.style.animation = `floatUpDown ${(Math.random()*1+2).toFixed(2)}s ease-in-out forwards`;
      document.body.appendChild(el); setTimeout(()=> el.remove(), 3000);
    }
    document.addEventListener('click', (e)=>{ if (!e.target.closest('.player') && !e.target.closest('#musicToggle')){ const n=Math.floor(Math.random()*6)+8; for (let j=0;j<n;j++){ setTimeout(()=> spawnIcon(e.clientX, e.clientY), j*40);} } });
    
    /* DRAG & DROP POLAROID */
    const polaroids = document.getElementById('polaroids');
    const dropHint = document.getElementById('dropHint');

    function makePolaroid(url){
      const card = document.createElement('div');
      card.className = 'polaroid';
      const img = document.createElement('img');
      img.src = url;
      card.appendChild(img);

      // random v·ªã tr√≠ & g√≥c, gi·ªØ trong m√†n h√¨nh
      const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
      const margin = 180; // ch·ª´a 2 b√™n
      const left = Math.floor(Math.random() * Math.max(10, vw - margin)) + 10; // px
      const rot = (Math.random()*8 - 4).toFixed(1); // -4..4 ƒë·ªô
      card.style.left = left + 'px';
      card.style.transform = `rotate(${rot}deg)`;

      polaroids.appendChild(card);
    }

    function handleFiles(files){
      [...files].forEach(f=>{
        if(!f.type.startsWith('image/')) return;
        const reader = new FileReader();
        reader.onload = e => makePolaroid(e.target.result);
        reader.readAsDataURL(f);
      });
    }

    function showHint(v){ dropHint.style.opacity = v ? 1 : 0; }

    // D&D tr√™n to√†n trang
    ['dragenter','dragover'].forEach(ev=> document.addEventListener(ev, e=>{ e.preventDefault(); e.dataTransfer && (e.dataTransfer.dropEffect='copy'); showHint(true); }, false));
    ['dragleave','drop'].forEach(ev=> document.addEventListener(ev, e=>{ e.preventDefault(); showHint(false); }, false));
    document.addEventListener('drop', e=>{ if(e.dataTransfer) handleFiles(e.dataTransfer.files); });

    // Click n·ªÅn ƒë·ªÉ ch·ªçn file (fallback)
    document.addEventListener('dblclick', (e)=>{ if (!e.target.closest('.player') && !e.target.closest('#musicToggle')){ const inp=document.createElement('input'); inp.type='file'; inp.accept='image/*'; inp.multiple=true; inp.onchange=()=> handleFiles(inp.files); inp.click(); }});

  </script>
</body>
</html>
</body>
</html>
